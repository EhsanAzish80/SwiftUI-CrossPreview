<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'unsafe-inline';">
    <title>SwiftUI CrossPreview</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #1e1e1e;
            color: #d4d4d4;
        }
        
        h1 {
            color: #ffffff;
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        #errors {
            margin-bottom: 16px;
        }
        
        .error-banner {
            background-color: #5a1d1d;
            border-left: 4px solid #f48771;
            padding: 12px 16px;
            border-radius: 4px;
            color: #f48771;
        }
        
        .error-banner strong {
            display: block;
            margin-bottom: 8px;
            color: #ffffff;
        }
        
        .error-banner ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .error-banner li {
            margin: 4px 0;
        }
        
        #root {
            background-color: #252526;
            border-radius: 8px;
            padding: 20px;
            min-height: 300px;
        }
        
        .status {
            color: #808080;
            font-style: italic;
        }
        
        /* SwiftUI-style layout */
        .root {
          padding: 16px;
          font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .vstack {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .hstack {
          display: flex;
          flex-direction: row;
          gap: 8px;
        }

        .text {
          padding: 4px 8px;
          border-radius: 4px;
          background: #1e1e1e;
          color: #f5f5f5;
          font-size: 13px;
        }

        .image-placeholder {
          padding: 8px;
          border-radius: 4px;
          border: 1px dashed #888;
          font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>SwiftUI CrossPreview</h1>
    <div id="errors"></div>
    <div id="root">
        <p class="status">Waiting for Swift file content...</p>
    </div>
    
    <script>
        (function() {
            const vscode = acquireVsCodeApi();
            
            window.addEventListener('message', event => {
                const msg = event.data;
                if (msg.type === 'render') {
                    document.getElementById('errors').innerHTML = msg.errorHtml || '';
                    document.getElementById('root').innerHTML = msg.html || '<p class="status">No preview available.</p>';
                }
            });
        })();
    </script>
</body>
</html>
